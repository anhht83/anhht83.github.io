"use strict";(self.webpackChunkWebApp_Challenge_ReactJs=self.webpackChunkWebApp_Challenge_ReactJs||[]).push([[173],{682:function(e,n,t){t.d(n,{Jv:function(){return g},H5:function(){return v}});var r=t(1413),i=t(1933),o=t(4165),s=t(5861);function a(e){if(e.ok)return e;var n=e.headers.get("content-type");if(n&&n.indexOf("application/json")>-1)return e.json().then((function(e){return window.Promise.reject(e)}));throw new Error(e.statusText)}var c=function(){var e=(0,s.Z)((0,o.Z)().mark((function e(n){var t,i,s,c,l,u=arguments;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>1&&void 0!==u[1]?u[1]:{},i=t.headers,s=void 0===i?{}:i,c=t.body,"application/json"!==s["Content-Type"]||"string"===typeof c||c instanceof String||(c=JSON.stringify(c)),e.next=6,fetch(n,(0,r.Z)((0,r.Z)({},t),{},{body:c,headers:s})).then(a).then((function(e){return e.json()}));case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),l=c,u="b9bd48a6",d="https://www.omdbapi.com",f="apis/MovieApi/QUERY_MOVIES",h="apis/MovieApi/QUERY_MOVIE",v=function(e){var n=e.s,t=void 0===n?"":n,o=e.type,s=void 0===o?"movie":o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=["apikey=".concat(u),"type=".concat(s)];return t&&c.push("s=".concat(t)),(0,i.useInfiniteQuery)([f,{s:t,type:s}],(function(e){var n=e.pageParam,t=void 0===n?1:n;return l("".concat(d,"/?").concat(c.join("&"),"&page=").concat(t))}),(0,r.Z)((0,r.Z)({},a),{},{enabled:!!t,getNextPageParam:function(e,n){return"True"===e.Response&&n.length+1}}))},g=function(e){var n=e.id,t=void 0===n?"":n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=["apikey=".concat(u)];return t&&o.push("i=".concat(t)),r.enabled=!!t,(0,i.useQuery)([h,{id:t}],(function(){return l("".concat(d,"/?").concat(o.join("&")))}),r)}},3657:function(e,n,t){var r=t(885),i=t(2791),o=t(5316),s=t(3360),a=t(184);n.Z=function(e){var n=e.show,t=void 0!==n&&n,c=e.errorMessage,l=void 0===c?"Error":c,u=(0,i.useState)(t),d=(0,r.Z)(u,2),f=d[0],h=d[1];return(0,a.jsxs)(o.Z,{variant:"danger",show:f,backdrop:"static",centered:!0,dialogClassName:"modal-error",keyboard:!1,children:[(0,a.jsx)(o.Z.Body,{className:"text-center text-danger",children:l}),(0,a.jsx)(o.Z.Footer,{children:(0,a.jsx)(s.Z,{variant:"secondary",onClick:function(){return h(!1)},children:"Close"})})]})}},6283:function(e,n,t){t.d(n,{Z:function(){return o}});t(2791);var r=t.p+"static/media/movie-placeholder.a3da014746c0e0796a78.png",i=t(184),o=function(e){var n=e.src,t=void 0===n?"":n,o=e.className,s=void 0===o?"":o,a=e.placeholder,c=void 0===a?"":a,l=t;return t&&"N/A"!==t.toUpperCase()||(l=c||r),(0,i.jsx)("div",{style:{backgroundImage:"url(".concat(l,")")},className:"".concat(s," cover-img bg-light"),children:(0,i.jsx)("img",{src:l,className:"w-100 invisible"})})}},3964:function(e,n,t){t(2791);var r=t(4849),i=t(184);n.Z=function(e){var n=e.loadingMessage,t=void 0===n?"Loading ...":n;return(0,i.jsx)(r.Z,{animation:"border",role:"status",children:(0,i.jsx)("span",{className:"visually-hidden",children:t})})}},1557:function(e,n,t){t.r(n),t.d(n,{default:function(){return O}});var r=t(2982),i=t(885),o=t(2791),s=t(6731),a=t(5671),c=t(3144),l=t(136),u=t(516);function d(){return d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},d.apply(this,arguments)}var f=new Map,h=new WeakMap,v=0,g=void 0;function p(e){return Object.keys(e).sort().filter((function(n){return void 0!==e[n]})).map((function(n){return"".concat(n,"_").concat("root"===n?(t=e.root)?(h.has(t)||(v+=1,h.set(t,v.toString())),h.get(t)):"0":e[n]);var t})).toString()}function m(e){var n=p(e),t=f.get(n);if(!t){var r,i=new Map,o=new IntersectionObserver((function(n){n.forEach((function(n){var t,o=n.isIntersecting&&r.some((function(e){return n.intersectionRatio>=e}));e.trackVisibility&&"undefined"===typeof n.isVisible&&(n.isVisible=o),null==(t=i.get(n.target))||t.forEach((function(e){e(o,n)}))}))}),e);r=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),t={id:n,observer:o,elements:i},f.set(n,t)}return t}function y(e,n){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){var i=e.getBoundingClientRect();return n(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof t.threshold?t.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),function(){}}var o=m(t),s=o.id,a=o.observer,c=o.elements,l=c.get(e)||[];return c.has(e)||c.set(e,l),l.push(n),a.observe(e),function(){l.splice(l.indexOf(n),1),0===l.length&&(c.delete(e),a.unobserve(e)),0===c.size&&(a.disconnect(),f.delete(s))}}var b=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function x(e){return"function"!==typeof e.children}o.Component;var w=t(682),j=t(3964),Z=t(9470),k=t(8155),N=t(6283),V=t(184),I=function(e){var n=e.movie;return(0,V.jsxs)("div",{className:"card shadow-sm h-100",children:[(0,V.jsx)(N.Z,{src:n.Poster,className:"movies-item-img card-img-top"}),(0,V.jsxs)("div",{className:"card-body w-100 d-flex flex-column justify-content-between",children:[(0,V.jsx)("div",{className:"card-title h5",children:n.Title}),(0,V.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,V.jsx)(s.rU,{to:(0,Z.Gn)(k.Z.MOVIE,{id:n.imdbID}),className:"btn btn-sm btn-dark",children:"View"}),(0,V.jsx)("small",{children:n.Year})]})]})]})},C=function(e){var n=e.movies;return(0,V.jsx)("div",{className:"movies",children:(0,V.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-3",children:n.map((function(e){return(0,V.jsx)("div",{className:"col",children:(0,V.jsx)(I,{movie:e})},e.imdbID)}))})})},M=t(3657),O=function(){var e=(0,s.lr)(),n=(0,i.Z)(e,1)[0],t=function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=n.threshold,r=n.delay,s=n.trackVisibility,a=n.rootMargin,c=n.root,l=n.triggerOnce,u=n.skip,d=n.initialInView,f=n.fallbackInView,h=n.onChange,v=o.useState(null),g=(0,i.Z)(v,2),p=g[0],m=g[1],b=o.useRef(),x=o.useState({inView:!!d,entry:void 0}),w=(0,i.Z)(x,2),j=w[0],Z=w[1];b.current=h,o.useEffect((function(){var e;if(!u&&p)return e=y(p,(function(n,t){Z({inView:n,entry:t}),b.current&&b.current(n,t),t.isIntersecting&&l&&e&&(e(),e=void 0)}),{root:c,rootMargin:a,threshold:t,trackVisibility:s,delay:r},f),function(){e&&e()}}),[Array.isArray(t)?t.toString():t,p,c,a,l,u,s,f,r]);var k=null==(e=j.entry)?void 0:e.target;o.useEffect((function(){p||!k||l||u||Z({inView:!!d,entry:void 0})}),[p,k,l,u,d]);var N=[m,j.inView,j.entry];return N.ref=N[0],N.inView=N[1],N.entry=N[2],N}(),a=t.ref,c=t.inView,l=(0,w.H5)({s:n.get("txtSearch")}),u=l.data,d=l.isFetching,f=l.isError,h=l.error,v=l.hasNextPage,g=l.isFetchingNextPage,p=l.fetchNextPage;return(0,o.useEffect)((function(){c&&p()}),[c]),f?(0,V.jsx)(M.Z,{show:!0,errorMessage:h.message}):(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)("section",{className:"py-4",children:[(0,V.jsxs)("h3",{children:["Search: ",n.get("txtSearch")]}),u&&(0,V.jsxs)("div",{children:["Total ",u.pages[0].totalResults||0," results"]})]}),u&&(0,V.jsx)(C,{movies:u.pages.reduce((function(e,n){return[].concat((0,r.Z)(e),(0,r.Z)(n.Search||[]))}),[])}),(0,V.jsxs)("div",{className:"text-center py-4 mt-4",children:[v&&(0,V.jsx)("div",{ref:a}),(d||g)&&(0,V.jsx)(j.Z,{})]})]})}}}]);
//# sourceMappingURL=173.01d35c05.chunk.js.map